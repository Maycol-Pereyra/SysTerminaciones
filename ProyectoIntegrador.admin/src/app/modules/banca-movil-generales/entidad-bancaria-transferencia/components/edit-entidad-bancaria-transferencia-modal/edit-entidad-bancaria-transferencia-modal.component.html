<div class="modal-content">
  <div class="modal-header">
    <div class="modal-title h4" id="example-modal-sizes-title-lg">
      <ng-container *ngIf="vm">
        <ng-container *ngIf="vm.id">Editar</ng-container>
        <ng-container *ngIf="!vm.id">Crear</ng-container>
        Entidad Bancaria Para Transferencia
        <ng-container *ngIf="vm.id">'{{vm.nombre}}'</ng-container>
      </ng-container>
    </div>
  </div>
  <div class="overlay overlay-block cursor-default modal-body" style="min-height: 404px;">
    <ng-container *ngIf="isLoading$ | async">
      <div class="overlay-layer bg-transparent fixed-top">
        <div class="spinner spinner-lg spinner-success"></div>
      </div>
    </ng-container>

    <ng-container *ngIf="vm">
      <form action="#" class="form form-label-right" [formGroup]="formGroup">
        <div class="form-group row">
          <div class="col-lg-12">
            <label class="form-label">Nombre</label>
            <input 
              type="text" 
              class="form-control form-control-lg " 
              name="nombre"
              placeholder="Nombre" 
              autocomplete="off" 
              [class.is-invalid]="isControlInvalid('nombre')"
              [class.is-valid]="isControlValid('nombre')"
              formControlName="nombre" />
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'nombre')">Es requerido</div>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'nombre')">Debe tener al menos 1 caracter</div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'nombre')">Debe tener máximo 100 caracteres</div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">RNC</label>
                <input 
                  type="text" 
                  class="form-control form-control-lg " 
                  [mask]="maskRnc"
                  name="rnc"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('rnc')"
                  [class.is-valid]="isControlValid('rnc')"
                  formControlName="rnc" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'rnc')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'rnc')">Debe tener el formato #-##-#####-#</div>
                <div class="invalid-feedback" *ngIf="controlHasError('rncModulo11Validator', 'rnc')">El RNC es incorrecto</div>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">Cuenta de Banco Para Transferencia</label>
                <input 
                  type="text" 
                  class="form-control form-control-lg " 
                  name="cuentaBanco"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('cuentaBanco')"
                  [class.is-valid]="isControlValid('cuentaBanco')"
                  formControlName="cuentaBanco" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'cuentaBanco')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'cuentaBanco')">Debe tener al menos 1 caracter</div>
                <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'cuentaBanco')">Debe tener máximo 50 caracteres</div>
              </div>
            </div>    
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">Identificador Entidad</label>
                <input 
                  type="text"
                  class="form-control form-control-lg " 
                  name="entidadIdentificador"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('entidadIdentificador')"
                  [class.is-valid]="isControlValid('entidadIdentificador')"
                  formControlName="entidadIdentificador" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'entidadIdentificador')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'entidadIdentificador')">Debe tener al menos 1 caracter</div>
                <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'entidadIdentificador')">Debe tener máximo 3 caracteres</div>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">Número de la Entidad</label>
                <input 
                  type="text"
                  class="form-control form-control-lg " 
                  name="entidadNumero"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('entidadNumero')"
                  [class.is-valid]="isControlValid('entidadNumero')"
                  formControlName="entidadNumero" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'entidadNumero')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'entidadNumero')">Debe ser un valor numérico</div>
                <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'entidadNumero')">Debe tener al menos 1 caracter</div>
                <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'entidadNumero')">Debe tener máximo 10 caracteres</div>
              </div>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">Código IBAN</label>
                <input 
                  type="text"
                  class="form-control form-control-lg " 
                  name="codigoIban"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('codigoIban')"
                  [class.is-valid]="isControlValid('codigoIban')"
                  formControlName="codigoIban" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'codigoIban')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'codigoIban')">Debe tener al menos 1 caracter</div>
                <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'codigoIban')">Debe tener máximo 50 caracteres</div>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="form-group row">
              <div class="col-lg-12">
                <label class="form-label">Código BIC o SWIFT</label>
                <input 
                  type="text"
                  class="form-control form-control-lg " 
                  name="codigoSwift"
                  placeholder="" 
                  autocomplete="off" 
                  [class.is-invalid]="isControlInvalid('codigoSwift')"
                  [class.is-valid]="isControlValid('codigoSwift')"
                  formControlName="codigoSwift" />
                <div class="invalid-feedback" *ngIf="controlHasError('required', 'codigoSwift')">Es requerido</div>
                <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'codigoSwift')">Debe tener al menos 1 caracter</div>
                <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'codigoSwift')">Debe tener máximo 50 caracteres</div>
              </div>
            </div>
    
          </div>
        </div>     

        <div class="form-group row">
          <div class="col-sm-6">
            <label class="form-label">Tipo de Modelo de Arhcivo de Batch</label>
            <select 
              class="form-control form-control-lg selectpicker"
              data-size="7"
              data-live-search="true"
              name="tipoModeloArchiboBatchId"  
              formControlName="tipoModeloArchiboBatchId">
              <option [ngValue]="null">Seleccionar Uno</option>
              <ng-container *ngFor="let item of listaModeloArchiboBatch">
                <option [value]="item.id">{{item.descripcion}}</option>
              </ng-container>
            </select>
          </div>
    
          <div class="col-lg-6">
            <label class="form-label">Numero de Batch</label>
            <input 
              type="text"
              class="form-control form-control-lg " 
              name="numeroBatch"
              placeholder="" 
              autocomplete="off" 
              [class.is-invalid]="isControlInvalid('numeroBatch')"
              [class.is-valid]="isControlValid('numeroBatch')"
              formControlName="numeroBatch" />
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'numeroBatch')">Debe tener al menos 1 caracter</div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'numeroBatch')">Debe tener máximo 5 caracteres</div>
          </div>            
        </div>

        <div class="form-group row">
          <div class="col-lg-6">
            <label class="form-label">Tipo de Cuenta de Banco</label>
            <input 
              type="text"
              class="form-control form-control-lg " 
              name="tipoCuentaBanco"
              placeholder="" 
              autocomplete="off" 
              [class.is-invalid]="isControlInvalid('tipoCuentaBanco')"
              [class.is-valid]="isControlValid('tipoCuentaBanco')"
              formControlName="tipoCuentaBanco" />
              <span class="form-text text-muted">Usado en la generación del batch, ejemplo CA: Cuenta de Ahorro o CC: Cuenta Corriente</span>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'tipoCuentaBanco')">Debe tener al menos 1 caracter</div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'tipoCuentaBanco')">Debe tener máximo 2 caracteres</div>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-lg-12">
            <label class="form-label">Nota</label>
            <textarea 
              type="text" 
              class="form-control"
              name="nota"
              placeholder="Nota" 
              autocomplete="off" 
              rows="3"
              [class.is-invalid]="isControlInvalid('nota')"
              [class.is-valid]="isControlValid('nota')"
              formControlName="nota">
            </textarea>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'nota')">Es requerido</div>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'nota')">Debe tener al menos 1 caracter</div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'nota')">Debe tener máximo 250 caracteres</div>
          </div>
        </div>

        <h3 class="font-size-lg text-dark-75 font-weight-bold mb-10">
          Destinos de Transacciones
        </h3>

        <div class="checkbox-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="usaDestinoAportacion" />
            <span></span>Cuentas de aportaciones
          </label>
        </div>

        <div class="checkbox-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="usaDestinoAhorro" />
            <span></span>Cuentas de ahorros
          </label>
        </div>

        <div class="checkbox-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="usaDestinoCorriente" />
            <span></span>Cuentas corrientes
          </label>
        </div>

        <div class="checkbox-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="usaDestinoPrestamo" />
            <span></span>Préstamos
          </label>
        </div>

        <div class="checkbox-inline">
          <label class="checkbox">
            <input type="checkbox" formControlName="usaDestinoTarjetaCredito" />
            <span></span>Tarjetas de crédito
          </label>
        </div>

        <div class="separator separator-dashed my-8"></div>

        <ng-container *ngIf="+vm.id > 0">
          <div *ngIf="vm.estaActivo">
            <button type="button" class="btn btn-danger btn-elevate" (click)="inactivar()">Inactivar</button>
            <span class="form-text text-muted">
              El registro está <b>Activo</b>. Pulse para inactivar. Los registros inactivos no estarán disponibles para transferencias a terceros
            </span>
          </div>

          <div *ngIf="!vm.estaActivo">
            <button type="button" class="btn btn-primary btn-elevate" (click)="activar()">Activar</button>
            <span class="form-text text-muted">
              El registro está <b>Inactivo</b>. Pulse para activar.
            </span>
          </div>
        </ng-container>

      </form>
    </ng-container>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light btn-elevate mr-2" (click)="modal.dismiss()">Cancelar</button>
    <ng-container *ngIf="vm">
      <button type="submit" class="btn btn-primary btn-elevate" (click)="save()" [disabled]="formGroup.invalid">Guardar</button>
    </ng-container>
  </div>
</div>